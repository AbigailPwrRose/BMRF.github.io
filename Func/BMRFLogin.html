<html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<head>
<title>Black Mesa</title>
<link rel="icon" type="image/x-icon" href=ImgAttatched/Logo>
</head>
<header>
<img src="ImgAttatched/Banner.png" style= "display: block; margin-left: auto; margin-right: auto; width: 35%;"> </img>
</header>
<style>
body {margin:0;}

.icon-bar {
  width: 100%;
  background-color: #555;
  overflow: auto;
}

.icon-bar a {
  float: left;
  width: 25%;
  text-align: center;
  padding: 10px 0;
  transition: all 0.3s ease;
  color: white;
  font-size: 32px;
}

.icon-bar a:hover {
  background-color: #000;
}

.active {
  background-color: #e69500;
}
</style>
<body>

<div class="icon-bar">
  <a href="BMRFHomePage.html">About Us</a> 
  <a href="BMRFHistory.html">History</a> 
  <a href="BMRFStaff.html">Staff</a> 
  <a class="active" href="BMRFLogin.html">Login</a>
</div>
<br><br><br>
<h2>Please log in to continue</h2>

<form id="Login">
    Black Mesa ID : <input type="text" id="validate1" placeholder=""></input><br>
    Access Code : <input type="text" id="validate2" placeholder="0000-0000"></input><br>
    <button type="button" onclick="LoginStage1()">Submit</button>
</form>
  <p id="demo1"></p>
  <p id="demo2"></p>
  <p id="demo3"></p>
  <p id="demo4"></p>
</body>
<script>
function LoginStage1() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
    LoginStage2(this);
    }
  };
xhttp.open("GET", "StaffDatabase.xml", true);
xhttp.send();
}
function LoginStage2(XML) {
  document.getElementById("demo1").innerHTML = "Test1"
  var xmlDoc = xml.responseXML;
  var x = xmlDoc.getElementsByTagName("record");
  document.getElementById("demo2").innerHTML = "Test2";
  let inputID = document.getElementById("validate1").value;
  let inputCode = document.getElementById("validate2").value;
  var i;
  document.getElementById("demo3").innerHTML = "Test3";
  var TextL = "";
  for (let i = 0; i < x.length; i++) {
    var Auth = 0;
    TextL += x[i].getElementsByTagName("WebID")[0].childNodes[0].nodeValue +" " +x[i].getElementsByTagName("Access")[0].childNodes[0].nodeValue+", ";
    if (inputID === x[i].getElementsByTagName("WebID")[0].childNodes[0].nodeValue) {Auth +=1;};
    if (inputCode === x[i].getElementsByTagName("Access")[0].childNodes[0].nodeValue) {Auth +=1;};
    if (Auth === 2) {window.location.href="BMRFIntMain.html";};
        };
  document.getElementById("demo4").innerHTM = TextL;
    }
</script>
</html>
